<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Interactive Quizzes</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        body {
            font-family: 'Inter', sans-serif;
        }
        /* Custom scrollbar for the sidebar */
        .custom-scrollbar::-webkit-scrollbar {
            width: 8px;
        }
        .custom-scrollbar::-webkit-scrollbar-track {
            background: #1f2937;
        }
        .custom-scrollbar::-webkit-scrollbar-thumb {
            background-color: #4b5563;
            border-radius: 4px;
        }
        .custom-scrollbar::-webkit-scrollbar-thumb:hover {
            background-color: #6b7280;
        }
        /* Style for the collapsible summary elements */
        summary {
            cursor: pointer;
            list-style: none; /* Hide default arrow */
        }
        summary::before {
            content: '‚ñ∂';
            margin-right: 0.5rem;
            display: inline-block;
            transition: transform 0.2s ease;
        }
        details[open] summary::before {
            transform: rotate(90deg);
        }
    </style>
</head>
<body class="bg-gray-100 dark:bg-gray-900 text-gray-900 dark:text-gray-100 min-h-screen flex flex-col md:flex-row overflow-hidden">

    <aside class="bg-gray-800 text-white w-full md:w-64 p-6 flex flex-col space-y-4 shadow-xl overflow-y-auto custom-scrollbar">
        <h1 class="text-3xl font-bold text-center border-b border-gray-700 pb-4 mb-4">Quiz App üß†</h1>
        
        <div id="quiz-list-container" class="space-y-2 mt-4">
            <details class="group cursor-pointer" open>
                <summary class="text-xl font-semibold flex items-center p-2 rounded-lg hover:bg-gray-700 transition duration-200">
                    Module 1
                </summary>
                <div class="pl-6 pt-2 space-y-1">
                    <button class="quiz-btn w-full text-left p-2 rounded-md hover:bg-gray-600 transition duration-200" data-quiz="Unit 1">Unit 1</button>
                    <button class="quiz-btn w-full text-left p-2 rounded-md hover:bg-gray-600 transition duration-200" data-quiz="Unit 2">Unit 2</button>
                    <button class="quiz-btn w-full text-left p-2 rounded-md hover:bg-gray-600 transition duration-200" data-quiz="Unit 3">Unit 3</button>
                </div>
            </details>
            <details class="group cursor-pointer">
                <summary class="text-xl font-semibold flex items-center p-2 rounded-lg hover:bg-gray-700 transition duration-200">
                    Module 2
                </summary>
                <div class="pl-6 pt-2 space-y-1">
                    <button class="quiz-btn w-full text-left p-2 rounded-md hover:bg-gray-600 transition duration-200" data-quiz="Animal">Animal Kingdom</button>
                    <button class="quiz-btn w-full text-left p-2 rounded-md hover:bg-gray-600 transition duration-200" data-quiz="Unit 4">Space Quiz</button>
                </div>
            </details>
        </div>
    </aside>

    <main class="flex-1 p-8 overflow-y-auto">
        <div class="bg-white dark:bg-gray-800 p-8 rounded-xl shadow-lg w-full max-w-3xl mx-auto">
            <h2 id="quiz-title" class="text-4xl font-extrabold text-center text-gray-800 dark:text-gray-200 mb-6">Select a Quiz</h2>
            
            <div id="progress-container" class="mb-8 p-4 bg-gray-100 dark:bg-gray-700 rounded-lg shadow-inner hidden">
                <div class="flex justify-between items-center text-lg font-bold mb-2">
                    <span id="correct-count" class="text-green-600">Correct: 0</span>
                    <span id="incorrect-count" class="text-red-600">Incorrect: 0</span>
                </div>
                <div class="w-full bg-gray-300 dark:bg-gray-600 rounded-full h-4 relative overflow-hidden">
                    <div id="correct-bar" class="absolute h-full bg-green-500 rounded-full transition-all duration-300 ease-out" style="width: 0%;"></div>
                    <div id="incorrect-bar" class="absolute h-full bg-red-500 rounded-full transition-all duration-300 ease-out" style="width: 0%;"></div>
                </div>
            </div>

            <div id="quiz-content">
                <p class="text-center text-gray-600 dark:text-gray-400">
                    Click on a quiz from the left-hand navigation to get started!
                </p>
            </div>
        </div>
    </main>

    <script>
        // DOM elements
        const quizTitleEl = document.getElementById('quiz-title');
        const quizContentEl = document.getElementById('quiz-content');
        const progressContainer = document.getElementById('progress-container');
        const correctCountEl = document.getElementById('correct-count');
        const incorrectCountEl = document.getElementById('incorrect-count');
        const correctBarEl = document.getElementById('correct-bar');
        const incorrectBarEl = document.getElementById('incorrect-bar');
        const quizListContainer = document.getElementById('quiz-list-container');

        // Quiz data as a JSON object
        const quizData = {
            "Unit 1": [
                {
                    "question": "Which of these is considered to be an encumbrance?",
                    "answers": [
                        { "text": "A mortgage", "correct": false },
                        { "text": "A lease", "correct": false },
                        { "text": "An easement", "correct": false },
                        { "text": "All of these", "correct": true }
                    ],
                    "explanation": "A lease, mortgage, easement, or restriction is considered an encumbrance of a fee simple title."
                },
                {
                    "question": "Which of the following courses of action would the Federal Reserve Board take during an elongated period of \"tight money?\"",
                    "answers": [
                        { "text": "Purchasing large blocks of government bonds", "correct": false },
                        { "text": "Lower the reserve requirements of bank members", "correct": false },
                        { "text": "Decrease the discount rate for bank members", "correct": false },
                        { "text": "Any of the following", "correct": true }
                    ],
                    "explanation": "Answers (a), (b), (c), and (d) are all courses of action taken by the Federal Reserve Board to help alleviate tight money conditions in the country."
                },
                {
                    "question": "A broker acting as agent for a principal has as much authority as:",
                    "answers": [
                        { "text": "other parties believe the agent to possess.", "correct": false },
                        { "text": "the agent chooses to accept.", "correct": false },
                        { "text": "he chooses to accept as limited by the Statute of Limitations.", "correct": false },
                        { "text": "the principal actually or ostensibly confers upon him.", "correct": true }
                    ],
                    "explanation": "An agent has as much authority as his principal actually or ostensibly confers upon him."
                },
                {
                    "question": "What does a general warranty deed contain?",
                    "answers": [
                        { "text": "None of these.", "correct": false },
                        { "text": "Covenants regarding quiet enjoyment", "correct": false },
                        { "text": "Covenants that include provisions of a quitclaim deed", "correct": false },
                        { "text": "Covenants that warrant the new owner‚Äôs undisturbed and clear title", "correct": true }
                    ],
                    "explanation": "Covenants that warrant the new owner‚Äôs undisturbed and clear title are contained in a general warranty deed."
                },
                {
                    "question": "In Texas, if Heather is an agent for a buyer Harry and she shows him a property that is known to have ghosts living there according to the neighbors, but she does not inform Harry of this information, after Harry purchases the property, Heather would:",
                    "answers": [
                        { "text": "Be considered to have misrepresented Harry", "correct": false },
                        { "text": "Be liable for misrepresentation", "correct": false },
                        { "text": "Be open to being sued by Harry if he finds out about the ghosts", "correct": false },
                        { "text": "Not be liable for the nondisclosure of ghosts", "correct": true }
                    ],
                    "explanation": "In Texas, agents are absolved from any liability regarding nondisclosure of stigmatized properties."
                },
                {
                    "question": "A couple is looking at houses and turns one down because they felt the price of the home was too high. This is based on what principle of real estate?",
                    "answers": [
                        { "text": "Conformity", "correct": false },
                        { "text": "Anticipation", "correct": false },
                        { "text": "All of these", "correct": false },
                        { "text": "Substitution", "correct": true }
                    ],
                    "explanation": "The principle of substitution is the basis of the appraisal process. Explained simply, value is set by the cost of getting an equally desirable substitute."
                },
                {
                    "question": "Constructive eviction may allow for a tenant to vacate the premises before the expiration of a lease term. Which would be an example of this?",
                    "answers": [
                        { "text": "Landlord has shown property to prospective tenant and is negotiating terms", "correct": false },
                        { "text": "Property cannot be used for original purpose due to unnecessary and considerable changes made by landlord", "correct": false },
                        { "text": "Landlord fails to make necessary repairs", "correct": false },
                        { "text": "All of the above", "correct": true }
                    ],
                    "explanation": "All of the above are examples of constructive eviction. a) Landlord has shown property to prospective tenant and is negotiating terms b) Property cannot be used for original purpose due to unnecessary and considerable changes made by landlord c) Landlord fails to make necessary repairs"
                },
                {
                    "question": "\"A\" receives a life estate for the life of \"X.\" \"A\" dies before \"X.\" The estate:",
                    "answers": [
                        { "text": "ceases to exist.", "correct": false },
                        { "text": "reverts to the original grantor.", "correct": false },
                        { "text": "vests in", "correct": false },
                        { "text": "vests in the heirs of A until X dies at which time the estate will revert to the original grantor.", "correct": true }
                    ],
                    "explanation": "The estate vests in the heirs of \"A\" until \"X\" dies at which time the estate will revert to the original grantor."
                },
                {
                    "question": "The original amortization term minus the number of payments that have been applied refers to the:",
                    "answers": [
                        { "text": "Remaining interest", "correct": false },
                        { "text": "Total amortization term", "correct": false },
                        { "text": "Loan amount", "correct": false },
                        { "text": "Remaining term", "correct": true }
                    ],
                    "explanation": "The original amortization term minus the number of payments that have been applied refers to the remaining term."
                },
                {
                    "question": "If Franklin, a real estate agent, intentionally speaks very highly and enthusiastically about a property he is trying to sell to a client in order to secure the deal, this type of behavior would be:",
                    "answers": [
                        { "text": "Steering", "correct": false },
                        { "text": "Illegal", "correct": false },
                        { "text": "Misrepresentation", "correct": false },
                        { "text": "Puffing", "correct": true }
                    ],
                    "explanation": "The term ‚Äúpuffing‚Äù can be used to describe ‚Äúsales talk‚Äù that is used to secure a deal. As long as there is no misrepresentation, it is considered a legal practice."
                }
            ],
            "Unit 2": [
                {
                    "question": "A credit arrangement which allows a customer to borrow against a pre-approved line of credit when purchasing goods and services is called:",
                    "answers": [
                        { "text": "A loan", "correct": false },
                        { "text": "A credit card", "correct": false },
                        { "text": "None of these", "correct": false },
                        { "text": "Revolving debt", "correct": true }
                    ],
                    "explanation": "A credit arrangement which allows a customer to borrow against a pre-approved line of credit when purchasing goods and services is called revolving debt."
                },
                {
                    "question": "A valid written lease must include:",
                    "answers": [
                        { "text": "agreement to let, agreement to take delivery, and acceptance.", "correct": false },
                        { "text": "term, consideration, and description of the premises.", "correct": false },
                        { "text": "a landlord and tenant with the legal capacity to enter a binding contract.", "correct": false },
                        { "text": "all of the above", "correct": true }
                    ],
                    "explanation": "Each of the choices describes a necessary element of a valid lease."
                },
                {
                    "question": "How many acres are in the following described area: the W 1/2 of the N 1/2 of section 5?",
                    "answers": [
                        { "text": "110", "correct": false },
                        { "text": "120", "correct": false },
                        { "text": "140", "correct": false },
                        { "text": "160", "correct": true }
                    ],
                    "explanation": "A standard section of land is one square mile, which contains 640 acres. The N 1/2 of section 5 is 320 acres (640 / 2), and the W 1/2 of that is 160 acres (320 / 2)."
                },
                {
                    "question": "In Texas, if a builder of residential homes sells more than _______________ properties a year, they are required to obtain a real estate license or employ a licensed broker.",
                    "answers": [
                        { "text": "3", "correct": false },
                        { "text": "2", "correct": false },
                        { "text": "1", "correct": false },
                        { "text": "4", "correct": true }
                    ],
                    "explanation": "If a builder of residential homes sells more than 4 properties in a single year, they must obtain a real estate license or employ a real estate broker."
                },
                {
                    "question": "Real property includes all of the following except:",
                    "answers": [
                        { "text": "airspace.", "correct": false },
                        { "text": "minerals.", "correct": false },
                        { "text": "water rights.", "correct": false },
                        { "text": "oil.", "correct": true }
                    ],
                    "explanation": "Real property is land, anything permanently attached to the land, anything appurtenant to the land or anything immovable by law. Land includes airspace, surface rights, mineral rights, and water rights."
                },
                {
                    "question": "Brad sold his house to Jerry, who did not record the deed, but moved in. Brad then sold the same property to George, who reviewed the county recorder's records, but did not look at the property. Brad gave George a deed, which was recorded. Which of the following would be true concerning title to the property?",
                    "answers": [
                        { "text": "Jerry and George are co-owners of the property", "correct": false },
                        { "text": "George now owns the property because he recorded his deed and Jerry did not", "correct": false },
                        { "text": "George has recourse against Jerry for failure to record", "correct": false },
                        { "text": "Jerry maintains title", "correct": true }
                    ],
                    "explanation": "Although Jerry did not record the deed, he took possession by moving in. Possession of the property by Jerry gives constructive notice. Since George recorded after Jerry took possession, he had constructive notice of Jerry's rights."
                },
                {
                    "question": "Which of the following is correct concerning an ALTA extended coverage policy of title insurance?",
                    "answers": [
                        { "text": "It protects a lessee who occupies the property after the date shown on the title insurance policy", "correct": false },
                        { "text": "It protects against any encroachment that occurs after the date of issuance of the title policy", "correct": false },
                        { "text": "It protects against any easements created during the term of the title insurance policy", "correct": false },
                        { "text": "It is limited to stated conditions of title as of the date of the issuance of the title policy", "correct": true }
                    ],
                    "explanation": "An ALTA policy applies to owners or lenders not to lessees. A survey of the property is done at the time the policy is issued, but it does not protect against subsequent encroachments. Answer (b) is the only one that is correct."
                },
                {
                    "question": "The final step in the Statutory Dedication process is:",
                    "answers": [
                        { "text": "The acceptance by the proper official", "correct": false },
                        { "text": "The signature of the Real Estate Commissioner", "correct": false },
                        { "text": "None of these", "correct": false },
                        { "text": "The recording of the subdivision map", "correct": true }
                    ],
                    "explanation": "When the subdivision map is approved and recorded, this would be the final step in the Statutory Dedication process."
                },
                {
                    "question": "Consideration can be:",
                    "answers": [
                        { "text": "money.", "correct": false },
                        { "text": "services.", "correct": false },
                        { "text": "covenants.", "correct": false },
                        { "text": "all of the above", "correct": true }
                    ],
                    "explanation": "Covenants are promises and we know that consideration can be money, services, or promises. It can also be love and affection."
                },
                {
                    "question": "There are many agreements that could be placed in promissory notes that would prohibit the borrower from doing certain things. An agreement that would prohibit the borrower from paying off the loan before the maturity date is called a:",
                    "answers": [
                        { "text": "prevention clause.", "correct": false },
                        { "text": "defeasance clause.", "correct": false },
                        { "text": "release clause.", "correct": false },
                        { "text": "lock-in clause.", "correct": true }
                    ],
                    "explanation": "A lock-in clause prohibits borrowers from paying off a loan in advance. It is not allowed on residential units of less than four units."
                }
            ],
            "Unit 3": [
                {
                    "question": "Which planet is the hottest in our solar system?",
                    "answers": [
                        { "text": "Mercury", "correct": false },
                        { "text": "Venus", "correct": true },
                        { "text": "Earth", "correct": false },
                        { "text": "Jupiter", "correct": false }
                    ],
                    "explanation": "Despite being farther from the Sun than Mercury, Venus has a thick atmosphere that traps heat, making it the hottest planet."
                },
                {
                    "question": "What is the approximate length of a day on Venus?",
                    "answers": [
                        { "text": "24 hours", "correct": false },
                        { "text": "10 Earth days", "correct": false },
                        { "text": "243 Earth days", "correct": true },
                        { "text": "1 year", "correct": false }
                    ],
                    "explanation": "A single day on Venus is incredibly long, taking about 243 Earth days to complete one rotation. This is longer than its year!"
                }
            ],
            "Animal": [
                {
                    "question": "What is the fastest land animal?",
                    "answers": [
                        { "text": "Lion", "correct": false },
                        { "text": "Cheetah", "correct": true },
                        { "text": "Gazelle", "correct": false },
                        { "text": "Ostrich", "correct": false }
                    ],
                    "explanation": "The cheetah can reach speeds of up to 70 miles per hour (112 km/h) in short bursts."
                },
                {
                    "question": "Which animal is known as the 'King of the Jungle'?",
                    "answers": [
                        { "text": "Tiger", "correct": false },
                        { "text": "Lion", "correct": true },
                        { "text": "Gorilla", "correct": false },
                        { "text": "Elephant", "correct": false }
                    ],
                    "explanation": "Lions are widely known as the 'King of the Jungle,' although they primarily live in savannas and grasslands, not jungles."
                },
                {
                    "question": "What is the only mammal that can truly fly?",
                    "answers": [
                        { "text": "Flying squirrel", "correct": false },
                        { "text": "Bat", "correct": true },
                        { "text": "Sugar glider", "correct": false },
                        { "text": "Flying lemur", "correct": false }
                    ],
                    "explanation": "While other animals can glide, bats are the only mammals capable of sustained flight."
                }
            ],
            "Unit 4": [ // Renamed from "Unit 2" to "Unit 4"
                {
                    "question": "Which planet is known as the Red Planet?",
                    "answers": [
                        { "text": "Mars", "correct": true }, // Changed "Unit 2" to "Mars"
                        { "text": "Venus", "correct": false },
                        { "text": "Jupiter", "correct": false },
                        { "text": "Saturn", "correct": false }
                    ],
                    "explanation": "Mars is known as the Red Planet due to its reddish-orange appearance caused by iron oxide (rust) on its surface."
                },
                {
                    "question": "What is the name of the largest volcano on Mars?", // Changed "Unit 2" to "Mars"
                    "answers": [
                        { "text": "Mount Sharp", "correct": false },
                        { "text": "Valles Marineris", "correct": false },
                        { "text": "Olympus Mons", "correct": true },
                        { "text": "Elysium Mons", "correct": false }
                    ],
                    "explanation": "Olympus Mons is a massive shield volcano on Mars, and it is the largest volcano and highest known mountain on any planet in the Solar System."
                }
            ]
        };

        // State variables
        let currentQuizQuestions = [];
        let currentQuestionIndex = 0;
        let correctCount = 0;
        let incorrectCount = 0;
        let totalQuestions = 0;

        /**
         * Loads a new quiz based on the selected category.
         * @param {string} category The name of the quiz to load (e.g., "Unit 1").
         */
        function loadQuiz(category) {
            // Check if the quiz exists in our data
            if (!quizData[category]) {
                quizContentEl.innerHTML = `<p class="text-center text-red-500">Error: Quiz category "${category}" not found.</p>`;
                return;
            }

            // Update the quiz state
            currentQuizQuestions = quizData[category];
            totalQuestions = currentQuizQuestions.length;
            currentQuestionIndex = 0;
            correctCount = 0;
            incorrectCount = 0;

            // Update the UI
            quizTitleEl.textContent = `${category} Quiz`;
            progressContainer.classList.remove('hidden');
            updateProgress();
            showQuestion();
        }

        /**
         * Displays the current question and its answers.
         */
        function showQuestion() {
            if (currentQuestionIndex < totalQuestions) {
                const question = currentQuizQuestions[currentQuestionIndex];
                
                // Clear previous content
                quizContentEl.innerHTML = '';

                // Create and append the question element
                const questionDiv = document.createElement('div');
                questionDiv.classList.add('text-2xl', 'font-bold', 'mb-6', 'text-gray-900', 'dark:text-gray-200', 'text-center');
                questionDiv.textContent = `Question ${currentQuestionIndex + 1} of ${totalQuestions}: ${question.question}`;
                quizContentEl.appendChild(questionDiv);

                // Create and append the answers container
                const answersDiv = document.createElement('div');
                answersDiv.classList.add('space-y-4');
                question.answers.forEach((answer) => {
                    const answerBtn = document.createElement('button');
                    answerBtn.classList.add('answer-btn', 'w-full', 'p-4', 'bg-gray-200', 'dark:bg-gray-700', 'rounded-lg', 'text-gray-800', 'dark:text-gray-200', 'font-medium', 'text-left', 'hover:bg-gray-300', 'dark:hover:bg-gray-600', 'transition-colors', 'duration-200');
                    answerBtn.textContent = answer.text;
                    answerBtn.addEventListener('click', () => handleAnswer(answerBtn, answer.correct));
                    answersDiv.appendChild(answerBtn);
                });
                quizContentEl.appendChild(answersDiv);

                // Add feedback and next button containers
                const feedbackContainer = document.createElement('div');
                feedbackContainer.id = 'feedback-container';
                feedbackContainer.classList.add('mt-4', 'p-4', 'rounded-lg', 'text-white', 'font-semibold', 'whitespace-pre-wrap');
                feedbackContainer.style.display = 'none';
                quizContentEl.appendChild(feedbackContainer);

                const nextButton = document.createElement('button');
                nextButton.id = 'next-question-btn';
                nextButton.classList.add('mt-6', 'w-full', 'py-3', 'px-6', 'bg-blue-600', 'text-white', 'font-bold', 'rounded-lg', 'hover:bg-blue-700', 'transition', 'duration-200', 'ease-in-out');
                nextButton.textContent = 'Next Question';
                nextButton.style.display = 'none';
                nextButton.addEventListener('click', () => {
                    currentQuestionIndex++;
                    showQuestion();
                });
                quizContentEl.appendChild(nextButton);

            } else {
                // End of the quiz
                quizContentEl.innerHTML = `
                    <div class="text-center p-8 bg-green-100 dark:bg-green-800 rounded-xl">
                        <h3 class="text-3xl font-bold text-green-700 dark:text-green-200 mb-4">Quiz Complete! üéâ</h3>
                        <p class="text-xl text-gray-700 dark:text-gray-300">You got ${correctCount} out of ${totalQuestions} questions correct.</p>
                        <button onclick="window.location.reload()" class="mt-6 px-6 py-3 bg-blue-600 text-white rounded-lg font-semibold hover:bg-blue-700 transition duration-200">Restart</button>
                    </div>
                `;
            }
        }

        /**
         * Handles the user's answer selection and provides feedback.
         * @param {HTMLElement} selectedButton The button element the user clicked.
         * @param {boolean} isCorrect Whether the selected answer is correct.
         */
        function handleAnswer(selectedButton, isCorrect) {
            const questionData = currentQuizQuestions[currentQuestionIndex];
            const feedbackContainer = document.getElementById('feedback-container');
            const nextButton = document.getElementById('next-question-btn');
            const answerButtons = quizContentEl.querySelectorAll('.answer-btn');

            // Disable all answer buttons to prevent multiple selections
            answerButtons.forEach(btn => {
                btn.disabled = true;
                btn.classList.add('cursor-not-allowed');
                btn.classList.remove('hover:bg-gray-300', 'dark:hover:bg-gray-600');
            });
            
            // Check if the answer is correct
            if (isCorrect) {
                correctCount++;
                selectedButton.classList.remove('bg-gray-200', 'dark:bg-gray-700');
                selectedButton.classList.add('bg-green-500', 'text-white');
                feedbackContainer.classList.add('bg-green-500');
                feedbackContainer.textContent = 'Correct! ‚úÖ';
            } else {
                incorrectCount++;
                selectedButton.classList.remove('bg-gray-200', 'dark:bg-gray-700');
                selectedButton.classList.add('bg-red-500', 'text-white');
                feedbackContainer.classList.add('bg-red-500');
                
                // Find the correct answer text to display
                const correctAnswer = questionData.answers.find(answer => answer.correct);
                const correctAnswerText = correctAnswer ? correctAnswer.text : 'N/A';

                let feedbackText = `Incorrect! ‚ùå The correct answer was: "${correctAnswerText}".`;
                if (questionData.explanation) {
                    feedbackText += `\n\nExplanation: ${questionData.explanation}`;
                }
                feedbackContainer.textContent = feedbackText;

                // Highlight the correct answer button
                answerButtons.forEach(btn => {
                    const btnText = btn.textContent;
                    if (correctAnswer && btnText === correctAnswer.text) {
                        btn.classList.remove('bg-gray-200', 'dark:bg-gray-700');
                        btn.classList.add('bg-green-500', 'text-white');
                    }
                });
            }
            
            // Update the UI progress
            updateProgress();
            
            // Show feedback and next button
            feedbackContainer.style.display = 'block';
            nextButton.style.display = 'block';
        }

        /**
         * Updates the progress counters and the progress bar.
         */
        function updateProgress() {
            correctCountEl.textContent = `Correct: ${correctCount}`;
            incorrectCountEl.textContent = `Incorrect: ${incorrectCount}`;

            const totalAnswered = correctCount + incorrectCount;
            if (totalQuestions > 0 && totalAnswered > 0) {
                const correctPercentage = (correctCount / totalAnswered) * 100;
                const incorrectPercentage = (incorrectCount / totalAnswered) * 100;
                correctBarEl.style.width = `${correctPercentage}%`;
                incorrectBarEl.style.width = `${incorrectPercentage}%`;
                incorrectBarEl.style.left = `${correctPercentage}%`; // Position incorrect bar after correct bar
            } else {
                correctBarEl.style.width = '0%';
                incorrectBarEl.style.width = '0%';
                incorrectBarEl.style.left = '0%';
            }
        }

        // Event delegation for quiz selection buttons
        quizListContainer.addEventListener('click', (event) => {
            const button = event.target.closest('.quiz-btn');
            if (button) {
                const quizCategory = button.dataset.quiz;
                loadQuiz(quizCategory);
            }
        });
    </script>
</body>
</html>
